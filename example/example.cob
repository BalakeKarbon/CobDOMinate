000100 IDENTIFICATION DIVISION.
000200 PROGRAM-ID. EXAMPLESITE.
000300 ENVIRONMENT DIVISION.
000400 CONFIGURATION SECTION.
000500 SOURCE-COMPUTER. UNIX-LINUX.
000600 OBJECT-COMPUTER. WASM.
000700 INPUT-OUTPUT SECTION.
000800 FILE-CONTROL.
000900 DATA DIVISION.
001000 FILE SECTION.
001100 WORKING-STORAGE SECTION.
001200 01 WS-COOKIE.
001300   05 ALLOWED PIC X(64).
001400   05 NAME PIC X(14) VALUE 'cookiesAllowed'.
001500 01 WS-RETURN PIC S9.
001600 01 WS-NULL-BYTE PIC X(1) VALUE X'00'.
001700 01 WS-ELEMENTS.
001800   05 DOCBOD PIC X() VALUE 'body'.
001900   05 BUTTON-1.
002000     10 VAR PIC X(7) VALUE 'button1'.
002100     10 TYP PIC X(6) VALUE 'button'.
002200 LINKAGE SECTION.
002300 PROCEDURE DIVISION.
002400 EXAMPLE SECTION.
002500 ENTRY 'EXAMPLE'.
002600   PERFORM CHECK-COOKIE.
002700   CALL 'cobdom_create_element' USING BY REFERENCE 
002800     VAR OF BUTTON-1, TYP OF BUTTON-1, RETURNING WS-RETURN.
002900   CALL 'cobdom_inner_html' USING BY REFERENCE VAR OF BUTTON-1,
003000     TYP OF 
003100   GOBACK. 
003200 CALLBACK.
003300   DISPLAY 'Callback!'.
003400   GOBACK.
003500 CHECK-COOKIE.
003600   CALL 'cobdom_get_cookie' USING BY REFERENCE ALLOWED,
003700     NAME RETURNING WS-RETURN.
003800   DISPLAY 'Checking cookie...'.
003900   IF WS-RETURN >= 0
004000     IF ALLOWED NOT = ''
004100       DISPLAY ALLOWED
004200     ELSE
004300       DISPLAY 'Cookie not set.'
004400     END-IF
004500   ELSE
004600     DISPLAY 'Error.'
004700   END-IF.
004800   GOBACK.
